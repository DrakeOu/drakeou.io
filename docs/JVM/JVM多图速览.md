## JVM多图速览

**JVM内结构**

![JVM](..\static\JVM.png)

-----

一个线程运行时是包含私有的三个部分的：虚拟机栈，程序计数器，本地方法栈

- 程序计数器：用于线程切换时保存上下文，记录代码执行到了哪一行
- 局部变量表：线程运行时保存自己作用域的变量，和执行堆内对象的指针（引用）
- 操作数栈：是值进行具体运算的地方（不能在局部变量表内原地操作）
- 方法返回地址：记录这个栈帧运行完应该返回到调用方法的哪一行

方法区和栈都有指向堆的指针（对象实际存储的地方），可达性算法分析：

**在进行GC时，会暂停全部运行的线程（STW，stop the world）进行GC。在栈中和方法区中的对象引用称为GC ROOT，因为这是实际在运行对象的根。以ROOT去对对象引用进行检查，没有被ROOT调用的对象就表示没有线程在使用，已经是垃圾了，就会回收这部分对象。**

**minor GC**清理Eden和s0，s1区的垃圾。**Full GC**清理包含Old区的全部垃圾



**压栈是个什么样的过程**

![栈帧如何压栈](..\static\栈帧如何压栈.png)

-----

**JVM中是如何new一个对象的**

![JVM视角new一个对象](..\static\JVM视角new一个对象.png)

----

**栈空间和GC算法![JVM堆+GC算法](..\static\JVM堆+GC算法.png)**