
## HTTP长连接，短链接

- HTTP/1.0默认使用短链接，1.1默认使用长连接，设置Connection:keep-alive
- HTTP协议无状态一个任意资源一次请求
- 对应TCP的长短连接：
  - 长连接：双方建立连接后不会主动断开，后续读写继续使用该连接
  - TCP提供保活功能：如果client断开，服务端仍然会维护一个半开发的连接（维护期间client的请求会激活这个连接成一个正常连接），给定连接两个小时内没有动作则会向客户端发送探测报文：
    - 客户主机依然正常运行，且服务器可达。则客户端可以正常响应，服务器保活复位
    - 客户机目前状态不能响应，服务器无法收到探测响应，则每隔75s发送同样的探测，若一直没有响应则关闭连接
    - 客户端在上述状态恢复后，将继续处理探测响应，响应一个复位，服务器将终止这个连接
- 短链接优缺点：存在的连接均是有用的连接，没有多余的控制手段；但每次请求都需要进行三次握手，请求频繁的情况下，会有较大的带宽浪费
- 长连接的优缺点：相比短链接可以在请求频繁时省去多余的连接带宽；同样因为维护更多的连接，需要对连接进行存储和保活，以及长时间没有操作的连接进行清理，同时存在被恶意维持连接或创建连接来攻击服务器的可能
- HTTPS比HTTP更安全，也更加消耗性能，HTTP运行在TCP基础上，HTTPS运行在SSL/TLS基础上，而SSL运行在TCP上

